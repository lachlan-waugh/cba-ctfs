<!doctype html><html lang=en><head><meta charset=utf-8><title>ctfs && recon</title>
<meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black-translucent"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><link rel=stylesheet href=../reveal-js/css/reset.css><link rel=stylesheet href=../reveal-js/css/reveal.css><link rel=stylesheet href=../reveal-js/css/theme/black.css id=theme><link rel=stylesheet href=../highlight-js/default.min.css></head><body><div class=reveal><div class=slides><section><h2 id=well-get-started-at-1305>We&rsquo;ll get started at 13:05</h2></section><section data-noprocess data-shortcode-slide class=center><h1 id=what-is-a-ctf--recon>what is a ctf && recon</h1><h2 id=week01>week01</h2></section><section><h2 id=disclaimer>disclaimer</h2><ul><li>many of the tools and techniques discussed in these sessions could be used against real applications</li><li>don&rsquo;t do that</li></ul></section><section><h2 id=acknowledgement-of-country>acknowledgement of country</h2><ul><li>We begin by acknowledging the Traditional Custodians of the land on which we meet, and pay our respects to their Elders past and present. We extend that arespect to Aboriginal and Torres Strait Islander peoples here today.</li></ul></section><section><section data-shortcode-section><h2 id=what-will-we-cover-this-session>what will we cover this session</h2><ul><li><p>what is a CTF</p><ul><li>what types of vulnerabilities are there</li></ul></li><li><p>reconnaissance</p><ul><li>what is it/when do you use it</li><li>passive</li><li>active</li></ul></li></ul></section><section><h2 id=what-are-we-going-to-cover-later>what are we going to cover later</h2><ul><li>01 what is a ctf/recon</li><li>02 frontend web exploits</li><li>03 backend web exploits</li><li>04 digital forensics</li><li>05 network forensics</li><li>06 binary exploitation</li><li>07 further binary exploitation</li><li>08 privilege escalation</li></ul></section><section><h2 id=what-is-a-ctf>what is a ctf</h2><blockquote><p>essentially a &ldquo;hacking&rdquo; competition</p></blockquote><ul><li>exploiting some vulnerability in an application/ server/ etc to steal a flag (which is intended to be &ldquo;confidential information&rdquo;), e.g.,<ul><li>breaking into a database and stealing passwords</li><li>tricking banking software to give you money</li><li>making the server think you&rsquo;re an administrator</li></ul></li></ul></section><section><h2 id=what-types-of-ctfs-are-there>what types of ctfs are there</h2><ul><li>real-world &ldquo;pentester-training&rdquo; ones<ul><li>e.g. HackTheBox, TryHackMe</li><li>formulaic: run tools, find a CVE PoC, etc</li></ul></li><li>fun ones (more of a &ldquo;game&rdquo;)<ul><li>e.g. <a href=https://picoctf.org/>PicoCTF</a>, <a href=https://github.com/DownUnderCTF/Challenges_2022_Public>DUCTF</a>, <a href=#TODO>DefCon CTF</a>, <a href=https://capturetheflag.withgoogle.com/>Google CTF</a></li><li>build your own exploit, etc</li></ul></li></ul><blockquote><p>im not biased I swear</p></blockquote></section></section><section><section data-shortcode-section><h2 id=what-type-of-vulnerabilities-might-you-exploit>what type of vulnerabilities might you exploit?</h2><ul><li>poor access control</li><li>authentication/authorization issues</li><li><strong>injection vulnerabilities</strong> &lt;&ndash; the cool ones</li><li>weak cryptography</li><li>security miconfigurations</li></ul></section><section><h3 id=injection-vulnerabilities>injection vulnerabilities</h3><blockquote><p>TLDR: tricking a program to execute our user supplied input as code</p></blockquote></section><section><h2 id=is-this-code-vulnerable>is this code vulnerable??</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;stdio.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>(<span style=color:#66d9ef>void</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>char</span> buffer[<span style=color:#ae81ff>64</span>];
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gets</span>(buffer);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></section><section><h2 id=is-this-code-vulnerable-1>is this code vulnerable??</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;stdio.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>(<span style=color:#66d9ef>void</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>char</span> buffer[<span style=color:#ae81ff>16</span>];
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gets</span>(buffer);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>yes</p></blockquote><p><code>AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\x62\x92\x04\x08</code></p></section><section><h2 id=why>why?</h2><pre tabindex=0><code>            0x18  [  ARGS  ] &lt;- Parameters
            0x14  [  EIP   ] &lt;- Stored Return Pointer
            0x10  [  EBP   ] &lt;- Stored Frame Pointer
            0x0C  [  AAAA  ] &lt;- these are local vars
            0x08  [  AAAA  ]
            0x04  [  AAAA  ]
            0x00  [  AAAA  ]
</code></pre><p>it&rsquo;s a buffer overflow, you write past the end of the array and overwrite variables stored in memory near it</p></section><section><h2 id=is-this-code-vulnerable-2>is this code vulnerable??</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span><span style=color:#f92672>from</span> flask <span style=color:#f92672>import</span> Flask, request, render_template_string
</span></span><span style=display:flex><span>app <span style=color:#f92672>=</span> Flask(__name__)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>home</span>():
</span></span><span style=display:flex><span>    template <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;blah blah here&#39;s some content </span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    data <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span>args<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;data&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> render_template_string(template<span style=color:#f92672>.</span>format(data))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    app<span style=color:#f92672>.</span>run()
</span></span></code></pre></div></section><section><h2 id=is-this-code-vulnerable-3>is this code vulnerable??</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span><span style=color:#f92672>from</span> flask <span style=color:#f92672>import</span> Flask, request, render_template_string
</span></span><span style=display:flex><span>app <span style=color:#f92672>=</span> Flask(__name__)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>home</span>():
</span></span><span style=display:flex><span>    template <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;blah blah here&#39;s some content </span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    data <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span>args<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;data&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> render_template_string(template<span style=color:#f92672>.</span>format(data))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    app<span style=color:#f92672>.</span>run()
</span></span></code></pre></div><blockquote><p>yes (its a serverside template injection)</p></blockquote><p>{{ namespace.__init__.__globals__.os.popen(&lsquo;id&rsquo;) }}</p></section><section><h3 id=why-1>why?</h3><blockquote><p>unsantisied user input</p></blockquote><ul><li>it&rsquo;s dangerous when data is treated as control<ul><li>e.g. the username can change the flow of the program</li></ul></li><li>tricking a program to execute code instead of reading or writing data</li></ul></section><section><h3 id=a-side-note>a side note</h3><ul><li>ctfs are hard: they aren&rsquo;t intuitive and they take a long time</li><li>at some point, everyone was where you are now</li><li>there&rsquo;s more resources out there (youtube videos, ctf/cve writeups) than you could read/watch in 10 lifetimes (hopefully that&rsquo;s not too daunting)</li></ul></section><section><h3 id=resources>resources</h3><ul><li>ctfs<ul><li><a href=https://ringzer0ctf.com/challenges>ringzer0</a>, <a href=https://owasp.org/www-project-juice-shop/>juice-shop</a>, <a href=https://picoctf.org/index.html#picogym>picoctf</a>, <a href=https://exploit.education/phoenix/>pheonix</a></li></ul></li><li>youtube videos<ul><li><a href=https://www.youtube.com/@_JohnHammond/videos>john hammond</a>, <a href=https://www.youtube.com/@LiveOverflow>liveoverflow</a>, <a href=https://www.youtube.com/@ippsec/videos>ippsec</a></li></ul></li><li>good series<ul><li><a href="https://www.youtube.com/watch?v=iyAyN3GFM7A&amp;list=PLhixgUqwRTjxglIswKp9mpkfPNfHkzyeN">intro to binary exploitation</a></li></ul></li></ul><blockquote><p>most of the resources will be on my website <a href=https://waugh.zip/cba-ctfs>waugh.zip/cba-ctfs</a></p></blockquote></section></section><section><section data-shortcode-section><h2 id=reconnaissance>reconnaissance</h2></section><section><h2 id=what-is-recon>what is recon</h2><ul><li>these should always be your first steps</li><li>essentially everything that isn&rsquo;t exploitation<ul><li>looking at a website</li><li>reading the html source</li><li>giving a application input it doesn&rsquo;t expect (e.g., code, a really big input, a file type it doesn&rsquo;t expect)</li></ul></li></ul></section><section><h2 id=why-is-it-important>why is it important?</h2><ul><li>asymmetry of attack and defence<ul><li>defenders need to defend everything</li><li>attackers only need a single vulnerability</li></ul></li><li>important to expand your attack surface</li><li>understand what the application does, before trying to exploit it</li></ul></section><section><h2 id=passive-recon>passive recon</h2><ul><li>finding web content</li><li>information leaked in local files (e.g. robots.txt, sitemap.xml, javascript files, html comments)</li><li>surely nobody would expose information in <a href=https://www.malwarebytes.com/blog/news/2022/02/journalist-wont-be-indicted-for-hacking-for-viewing-a-state-websites-html>HTML</a></li></ul></section><section><h2 id=demo>demo</h2><blockquote><p>website.com (don&rsquo;t try it at home)</p></blockquote></section><section><h2 id=active-recon>active recon</h2><ul><li>grabbing a big list of words, and seeing if any of them resolve:<ul><li>as a subdomain: .example.com</li><li>as a subdirectory: example.com/</li><li>as a port: example.com:</li></ul></li><li>also <a href=https://github.com/carlospolop/PEASS-ng/tree/master/linPEAS>linpeas</a>, <a href=https://github.com/sqlmapproject/sqlmap>sqlmap</a>, <a href=https://www.metasploit.com/>metasploit</a></li></ul></section><section><h2 id=subdomainsubdirectoryport>subdomain/subdirectory/port</h2><ul><li>subdirectory: another part of the same site<ul><li>gobuster, dirbuster, etc</li></ul></li><li>subdomain: another server<ul><li>also gobuster, dirbuster</li></ul></li><li>port: another application<ul><li>nmap</li></ul></li></ul><blockquote><p><a href=https://github.com/danielmiessler/SecLists>seclists</a> and <a href=https://github.com/kkrypt0nn/wordlists>wordlists</a> can be helpful wordlists</p></blockquote></section><section><h2 id=demo-1>demo</h2></section><section><h2 id=bruteforcing-considerations>bruteforcing considerations</h2><ul><li>very noisy<ul><li>bruteforcing over dns vs http</li><li>you might be blocked</li></ul></li><li>not everything is a bruteforcing challenge<ul><li>in a real engagement they&rsquo;d get angry</li></ul></li></ul></section></section><section><h3 id=practice>practice</h3><blockquote><p>do some of the challenges on picoctf web exploitation <a href="https://play.picoctf.org/practice/challenge/173?category=1&amp;page=1">here</a></p></blockquote></section><section><h2 id=next-week>next week</h2><blockquote><p>frontend web exploitation (XSS, CSRF, Clickjacking)</p></blockquote></section><section><h2 id=thank-you>thank you</h2><blockquote><p>we&rsquo;re done! any questions?</p></blockquote></section></div></div><script type=text/javascript src=../reveal-hugo/object-assign.js></script><a href=../reveal-js/css/print/ id=print-location style=display:none></a><script type=text/javascript>var printLocationElement=document.getElementById("print-location"),link=document.createElement("link");link.rel="stylesheet",link.type="text/css",link.href=printLocationElement.href+(window.location.search.match(/print-pdf/gi)?"pdf.css":"paper.css"),document.getElementsByTagName("head")[0].appendChild(link)</script><script type=application/json id=reveal-hugo-site-params>null</script><script type=application/json id=reveal-hugo-page-params>null</script><script src=../reveal-js/js/reveal.js></script><script type=text/javascript>function camelize(e){return e&&Object.keys(e).forEach(function(t){newK=t.replace(/(_\w)/g,function(e){return e[1].toUpperCase()}),newK!=t&&(e[newK]=e[t],delete e[t])}),e}var revealHugoDefaults={center:!0,controls:!0,history:!0,progress:!0,transition:"slide"},revealHugoSiteParams=JSON.parse(document.getElementById("reveal-hugo-site-params").innerHTML),revealHugoPageParams=JSON.parse(document.getElementById("reveal-hugo-page-params").innerHTML),options=Object.assign({},camelize(revealHugoDefaults),camelize(revealHugoSiteParams),camelize(revealHugoPageParams));Reveal.initialize(options)</script><script type=text/javascript src=../reveal-js/plugin/markdown/marked.js></script><script type=text/javascript src=../reveal-js/plugin/markdown/markdown.js></script><script type=text/javascript src=../reveal-js/plugin/highlight/highlight.js></script><script type=text/javascript src=../reveal-js/plugin/zoom-js/zoom.js></script><script type=text/javascript src=../reveal-js/plugin/notes/notes.js></script></body></html>